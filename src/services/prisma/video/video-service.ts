import type { Prisma, PrismaClient ,Video } from "@prisma/client";
import { BaseService } from "./../base-service";

import { createVideo } from "./create-video";
import { getVideoById } from "./get-video-by-id";
import { updateVideo } from "./update-video";
import { deleteVideo } from "./delete-video";
import { getAllVideos } from "./get-all-videos";

interface VideoService {
  createVideo(data: Prisma.VideoCreateInput): Promise<Video>;
  getVideoById(id: string): Promise<Video | null>;
  updateVideo(id: string, data: Prisma.VideoUpdateInput): Promise<Video>;
  deleteVideo(id: string): Promise<Video>;
  getAllVideos(): Promise<Video[]>;
}

export type VideoServiceReturnType<T extends keyof VideoService> = Awaited<
  ReturnType<VideoService[T]>
>;

export class VideoServiceImplementation extends BaseService implements VideoService {
  constructor(prisma: PrismaClient) {
    super(prisma);
  }

  async createVideo(data: Prisma.VideoCreateInput) {
    await this.beforeAction("createVideo", data);
    const result = await createVideo(this.prisma, data);
    await this.afterAction("reateVideo", result);
    return result;
  }

  async getVideoById(id: string) {
    await this.beforeAction("getVideoById", id);
    const result = await getVideoById(this.prisma, id);
    await this.afterAction("getVideoById", result);
    return result;
  }

  async updateVideo(id: string, data: Prisma.VideoUpdateInput) {
    await this.beforeAction("updateVideo", { id, data });
    const result = await updateVideo(this.prisma, id, data);
    await this.afterAction("updateVideo", result);
    return result;
  }

  async deleteVideo(id: string) {
    await this.beforeAction("deleteVideo", id);
    const result = await deleteVideo(this.prisma, id);
    await this.afterAction("deleteVideo", result);
    return result;
  }

  async getAllVideos() {
    await this.beforeAction("getAllVideos", null);
    const result = await getAllVideos(this.prisma);
    await this.afterAction("getAllVideos", result);
    return result;
  }

  // <AUTO-GENERATED METHODS>

  protected async beforeAction(action: string, data: unknown) {
    super.beforeAction(action, data);
    // Custom logic specific to VideoService
  }

  protected async afterAction(action: string, result: unknown) {
    super.afterAction(action, result);
    // Custom logic specific to VideoService
  }
}



